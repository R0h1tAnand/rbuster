# Release Process

This repository uses GitHub Actions to automatically build and release binaries for Linux and Windows.

## How to Create a New Release

1. **Update the version in `Cargo.toml`** (if needed)
   ```toml
   [package]
   version = "1.0.1"  # Update this
   ```

2. **Commit your changes**
   ```bash
   git add .
   git commit -m "chore: bump version to 1.0.1"
   git push origin main
   ```

3. **Create and push a git tag**
   ```bash
   git tag v1.0.1
   git push origin v1.0.1
   ```

4. **Wait for the workflow to complete**
   - The GitHub Actions workflow will automatically:
     - Build binaries for Linux (x86_64-unknown-linux-gnu)
     - Build binaries for Windows (x86_64-pc-windows-msvc)
     - Create a GitHub release
     - Upload both binaries to the release
     - Generate release notes

5. **Check the release**
   - Visit: https://github.com/R0h1tAnand/robuster/releases
   - The release will include:
     - `robuster-linux-x86_64` (Linux binary)
     - `robuster-windows-x86_64.exe` (Windows binary)
     - Source code archives (automatically generated by GitHub)

## Tag Naming Convention

- Use semantic versioning: `v{major}.{minor}.{patch}`
- Examples: `v1.0.0`, `v1.2.3`, `v2.0.0`

## Workflow Details

The release workflow (`.github/workflows/release.yml`) is triggered when you push a tag matching the pattern `v*.*.*`.

### Build Matrix

The workflow builds on multiple platforms in parallel:
- **Linux**: `ubuntu-latest` with target `x86_64-unknown-linux-gnu`
- **Windows**: `windows-latest` with target `x86_64-pc-windows-msvc`

### Caching

The workflow uses GitHub Actions cache for:
- Cargo registry
- Cargo index
- Target directory

This significantly speeds up subsequent builds.

## Manual Release (Alternative)

If you prefer to create a release manually without the workflow:

```bash
# Build for Linux (current platform)
cargo build --release

# Build for Windows (requires cross-compilation setup)
cargo build --release --target x86_64-pc-windows-gnu

# Create release using GitHub CLI
gh release create v1.0.1 \
  --title "robuster v1.0.1" \
  --notes "Release notes here" \
  target/release/robuster \
  target/x86_64-pc-windows-gnu/release/robuster.exe
```

## Troubleshooting

### Workflow fails to build

1. Check the Actions tab in your repository
2. Look at the build logs for specific errors
3. Ensure all dependencies are properly specified in `Cargo.toml`

### Release not created

1. Verify the tag matches the pattern `v*.*.*`
2. Check that the `GITHUB_TOKEN` has sufficient permissions
3. Review the workflow logs in the Actions tab

### Binary not uploaded

1. Ensure the artifact paths in the workflow are correct
2. Verify the build completed successfully
3. Check the `files:` section in the `create-release` job
